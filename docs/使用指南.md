# Portfolio Selection ä½¿ç”¨æŒ‡å—

**æŠ•èµ„ç»„åˆä¼˜åŒ–ç³»ç»Ÿ - å®Œæ•´ä½¿ç”¨æ‰‹å†Œ**

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä¸€é”®è¿è¡Œ

```bash
# 1. è¿›å…¥é¡¹ç›®ç›®å½•
cd /Users/zp/Desktop/cource_assignment

# 2. æ¿€æ´»condaç¯å¢ƒ
conda activate cource_work

# 3. è¿è¡Œä¸»ç¨‹åº
python main.py
```

**âš ï¸ é‡è¦æç¤º**ï¼š
- **é¦–æ¬¡è¿è¡Œéœ€è¦å¼€å¯å…¨å±€ä»£ç†**ï¼ˆç”¨äºè®¿é—®Yahoo Financeè·å–æ•°æ®ï¼‰
- ç¡®ä¿ç½‘ç»œè¿æ¥æ­£å¸¸ï¼Œèƒ½è®¿é—®å›½é™…ç½‘ç«™
- å¦‚å·²æœ‰æ•°æ®æ–‡ä»¶ï¼Œå¯è·³è¿‡æ•°æ®è·å–æ­¥éª¤ï¼ˆæ— éœ€ä»£ç†ï¼‰

**é¦–æ¬¡è¿è¡Œæ—¶é—´**ï¼šçº¦30ç§’ï¼ˆå«æ•°æ®è·å–ï¼‰  
**åç»­è¿è¡Œæ—¶é—´**ï¼šçº¦10ç§’ï¼ˆä½¿ç”¨100ä¸ªmuå€¼ï¼‰

---

## ğŸ“‹ é¡¹ç›®æ¦‚å†µ

### åŸºæœ¬ä¿¡æ¯

- **ç ”ç©¶å¯¹è±¡**ï¼šPortfolio Selectionï¼ˆæŠ•èµ„ç»„åˆé€‰æ‹©ï¼‰
- **å‚è€ƒæ•™æ**ï¼šRobert J. Vanderbei - Linear Programming (2020 5th) ç¬¬13ç« 
- **å®ç°å·¥å…·**ï¼šPython + PuLP + CBCæ±‚è§£å™¨
- **æ•°æ®æ¥æº**ï¼šYahoo FinanceçœŸå®å¸‚åœºæ•°æ®
- **æŠ•èµ„æ ‡çš„**ï¼š9ä¸ªETFï¼ˆSHY, XLB, XLE, XLF, XLI, XLK, XLP, XLU, XLVï¼‰
- **æ•°æ®å‘¨æœŸ**ï¼š36ä¸ªæœˆï¼ˆ2022.11 - 2025.10ï¼‰

### æ ¸å¿ƒæˆæœ

- âœ… **100ä¸ªæœ€ä¼˜æŠ•èµ„ç»„åˆ**ï¼ˆå®Œæ•´æœ‰æ•ˆå‰æ²¿ï¼‰
- âœ… **5å¼ ä¸“ä¸šå›¾è¡¨**ï¼ˆ300 DPIé«˜æ¸…ï¼‰
- âœ… **è¯¦ç»†åˆ†ææŠ¥å‘Š**
- âœ… **å®Œæ•´æºä»£ç **ï¼ˆçº¦1140è¡Œï¼‰

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
cource_assignment/
â”œâ”€â”€ README.md                          # é¡¹ç›®ç®€ä»‹
â”œâ”€â”€ main.py                            # ä¸»ç¨‹åºï¼ˆè¿è¡Œè¿™ä¸ªï¼‰
â”œâ”€â”€ requirements.txt                   # ä¾èµ–åŒ…åˆ—è¡¨
â”‚
â”œâ”€â”€ src/                               # æºä»£ç 
â”‚   â”œâ”€â”€ data_fetcher.py               # æ•°æ®è·å–
â”‚   â”œâ”€â”€ portfolio_model.py            # ä¼˜åŒ–æ¨¡å‹
â”‚   â””â”€â”€ visualization.py              # å¯è§†åŒ–
â”‚
â”œâ”€â”€ data/                              # æ•°æ®
â”‚   â”œâ”€â”€ raw/price_data.csv            # åŸå§‹ä»·æ ¼
â”‚   â””â”€â”€ processed/monthly_returns.csv # æœˆåº¦æ”¶ç›Šç‡
â”‚
â”œâ”€â”€ results/                           # ç»“æœ
â”‚   â”œâ”€â”€ analysis/
â”‚   â”‚   â”œâ”€â”€ optimization_results.csv  # 100ä¸ªä¼˜åŒ–ç»“æœ
â”‚   â”‚   â””â”€â”€ analysis_report.txt       # åˆ†ææŠ¥å‘Š
â”‚   â””â”€â”€ figures/                      # 5å¼ å›¾è¡¨
â”‚
â”œâ”€â”€ docs/                              # æ–‡æ¡£
â”‚   â”œâ”€â”€ ä½¿ç”¨æŒ‡å—.md                   # æœ¬æ–‡ä»¶
â”‚   â”œâ”€â”€ ç®—æ³•åŸç†.md                   # æŠ€æœ¯æ–‡æ¡£
â”‚   â”œâ”€â”€ æœ‰æ•ˆå‰æ²¿è¯´æ˜.md               # ç»“æœè§£è¯»
â”‚   â”œâ”€â”€ PPTå¤§çº².md                    # æ¼”ç¤ºå¤§çº²
â”‚   â””â”€â”€ é¡¹ç›®æ€»ç»“.md                   # å®Œæˆæ€»ç»“
â”‚
â””â”€â”€ Requirements&References/           # å‚è€ƒèµ„æ–™
    â”œâ”€â”€ è¯¾ç¨‹ä½œä¸šä¸€.md                 # ä½œä¸šè¦æ±‚
    â”œâ”€â”€ cource_work.md                # æ•™æåŸæ–‡
    â””â”€â”€ æ•™æç¬¬13ç« _ä¸­æ–‡ç¿»è¯‘.md        # æ•™æç¿»è¯‘
```

---

## ğŸ¯ æ ¸å¿ƒç»“æœ

### 100ä¸ªæœ€ä¼˜æŠ•èµ„ç»„åˆ

**æœ‰æ•ˆå‰æ²¿è¦†ç›–**ï¼š
- muå€¼èŒƒå›´ï¼š0.1 â†’ 31.6
- æ”¶ç›ŠèŒƒå›´ï¼š0.36% â†’ 2.62%ï¼ˆæœˆåº¦ï¼‰
- é£é™©èŒƒå›´ï¼š0.42% â†’ 4.43%ï¼ˆMADï¼‰

### ä»£è¡¨æ€§ç»„åˆ

#### 1. æœ€å°é£é™©ï¼ˆä¿å®ˆå‹ï¼‰
```
mu = 0.10
é…ç½®ï¼š99.2% SHYï¼ˆå›½å€ºï¼‰ + 0.8% XLEï¼ˆèƒ½æºï¼‰
æœˆæ”¶ç›Šï¼š0.36%ï¼Œå¹´åŒ–ï¼š4.44%
é£é™©ï¼š0.42%
å¤æ™®æ¯”ç‡ï¼š238.91 â­â­â­â­â­
```

#### 2. å¹³è¡¡ç»„åˆï¼ˆç¨³å¥å‹ï¼‰
```
mu â‰ˆ 1.08
é…ç½®ï¼š90.4% SHY + 8.0% XLKï¼ˆç§‘æŠ€ï¼‰ + 1.6% XLE
æœˆæ”¶ç›Šï¼š0.54%ï¼Œå¹´åŒ–ï¼š6.72%
é£é™©ï¼š0.56%
å¤æ™®æ¯”ç‡ï¼š179.18 â­â­â­â­â­
```

#### 3. æœ€å¤§æ”¶ç›Šï¼ˆæ¿€è¿›å‹ï¼‰
```
mu â‰¥ 2.92
é…ç½®ï¼š100% XLKï¼ˆç§‘æŠ€æ¿å—ï¼‰
æœˆæ”¶ç›Šï¼š2.62%ï¼Œå¹´åŒ–ï¼š36.42%
é£é™©ï¼š4.43%
å¤æ™®æ¯”ç‡ï¼š23.19 â­â­
```

### ç­–ç•¥å¯¹æ¯”

| ç­–ç•¥ | æœˆæ”¶ç›Š | é£é™© | å¤æ™®æ¯”ç‡ |
|------|--------|------|---------|
| æœ€å°é£é™©ä¼˜åŒ– | 0.36% | 0.42% | **238.91** |
| å¹³è¡¡ä¼˜åŒ– | 0.54% | 0.56% | **179.18** |
| ç­‰æƒé‡ | 1.04% | 2.49% | 40.61 |
| æœ€å¤§æ”¶ç›Šä¼˜åŒ– | 2.62% | 4.43% | 23.19 |

**ç»“è®º**ï¼šä¼˜åŒ–ç­–ç•¥çš„å¤æ™®æ¯”ç‡æ˜¯ç®€å•ç­–ç•¥çš„4-10å€ï¼

---

## ğŸ“Š ç”Ÿæˆçš„æ–‡ä»¶è¯´æ˜

### æ•°æ®æ–‡ä»¶

1. **data/raw/price_data.csv**
   - 9ä¸ªETFçš„æ—¥åº¦ä»·æ ¼æ•°æ®
   - 751ä¸ªäº¤æ˜“æ—¥
   - æ—¶é—´èŒƒå›´ï¼š2022-10-30 è‡³ 2025-10-29

2. **data/processed/monthly_returns.csv**
   - æœˆåº¦æ”¶ç›Šç‡æ•°æ®
   - 36ä¸ªæœˆ
   - æ ¼å¼ï¼šR(t) = P(t) / P(t-1)

### ç»“æœæ–‡ä»¶

3. **results/analysis/optimization_results.csv**
   - **100è¡Œä¼˜åŒ–ç»“æœ**
   - æ¯è¡ŒåŒ…å«ï¼šmuã€æ”¶ç›Šã€é£é™©ã€9ä¸ªèµ„äº§çš„æƒé‡
   - å¯ç”¨Excel/Numbersæ‰“å¼€

4. **results/analysis/analysis_report.txt**
   - è¯¦ç»†çš„æ–‡å­—åˆ†ææŠ¥å‘Š
   - åŒ…å«æ•°æ®æ¦‚å†µã€æ¨¡å‹è¯´æ˜ã€å…³é”®ç»„åˆã€ä¸»è¦å‘ç°

### å›¾è¡¨æ–‡ä»¶

5. **efficient_frontier.png** - æœ‰æ•ˆå‰æ²¿å›¾
   - è“è‰²æ›²çº¿ï¼š100ä¸ªæœ€ä¼˜ç»„åˆ
   - ç»¿è‰²æ˜Ÿï¼šæœ€å°é£é™©ç»„åˆ
   - çº¢è‰²æ˜Ÿï¼šæœ€å¤§æ”¶ç›Šç»„åˆ

6. **weights_evolution.png** - æƒé‡æ¼”åŒ–å›¾
   - å †ç§¯é¢ç§¯å›¾æ˜¾ç¤ºèµ„äº§é…ç½®å˜åŒ–
   - Xè½´ï¼šmuå€¼ï¼ˆå¯¹æ•°åˆ»åº¦ï¼‰
   - Yè½´ï¼šé…ç½®æƒé‡

7. **mu_sensitivity.png** - å‚æ•°æ•æ„Ÿæ€§å›¾
   - ä¸‰ä¸ªå­å›¾æ˜¾ç¤ºmuå¯¹æ”¶ç›Šã€é£é™©ã€ç›®æ ‡å‡½æ•°çš„å½±å“

8. **strategy_comparison.png** - ç­–ç•¥å¯¹æ¯”å›¾
   - å·¦å›¾ï¼šæ”¶ç›Šå¯¹æ¯”
   - å³å›¾ï¼šé£é™©å¯¹æ¯”

9. **weight_heatmap.png** - æƒé‡çƒ­åŠ›å›¾
   - é¢œè‰²æ·±æµ…è¡¨ç¤ºé…ç½®æ¯”ä¾‹
   - å¯è§èµ„äº§é…ç½®çš„æ¼”åŒ–æ¨¡å¼

---

## ğŸ”§ ç¯å¢ƒé…ç½®

### å‰ç½®è¦æ±‚

- Python 3.8+
- Condaç¯å¢ƒç®¡ç†å™¨
- ç½‘ç»œè¿æ¥ï¼ˆé¦–æ¬¡è·å–æ•°æ®ï¼‰

### ä¾èµ–å®‰è£…

```bash

# åˆ›å»ºç¯å¢ƒ
conda create -n course_work python=3.10

# æ¿€æ´»ç¯å¢ƒ
conda activate course_work

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

---

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### æ–¹æ³•1ï¼šè¿è¡Œå®Œæ•´åˆ†æ

```bash
python main.py
```

ç¨‹åºå°†è‡ªåŠ¨å®Œæˆï¼š
1. æ•°æ®è·å–/åŠ è½½
2. æ¨¡å‹æ„å»º
3. å‚æ•°åŒ–æ±‚è§£ï¼ˆ100ä¸ªmuå€¼ï¼‰
4. åŸºå‡†ç­–ç•¥è®¡ç®—
5. å¯è§†åŒ–ç”Ÿæˆ
6. æŠ¥å‘Šè¾“å‡º

### æ–¹æ³•2ï¼šå•ç‹¬è¿è¡Œæ¨¡å—

#### æ•°æ®è·å–
```bash
cd src
python data_fetcher.py
```

#### ä¼˜åŒ–æ±‚è§£
```python
from src.portfolio_model import PortfolioOptimizer
import pandas as pd

returns = pd.read_csv('data/processed/monthly_returns.csv', 
                      index_col=0, parse_dates=True)
optimizer = PortfolioOptimizer(returns)

# æ±‚è§£å•ä¸ªmuå€¼
result = optimizer.solve(mu=5.0)
print(result)

# å‚æ•°åŒ–æ±‚è§£
results_df = optimizer.solve_parametric()  # é»˜è®¤100ä¸ªmuå€¼
```

#### å¯è§†åŒ–
```python
from src.visualization import PortfolioVisualizer
import pandas as pd

results_df = pd.read_csv('results/analysis/optimization_results.csv')
asset_names = ['SHY', 'XLB', 'XLE', 'XLF', 'XLI', 'XLK', 'XLP', 'XLU', 'XLV']

viz = PortfolioVisualizer(results_df, asset_names)
viz.plot_all()
```

---

## ğŸ“– æ•°å­¦æ¨¡å‹

### çº¿æ€§è§„åˆ’æ¨¡å‹

**ç›®æ ‡å‡½æ•°**ï¼š
$$\max \quad \mu \sum_{j=1}^9 x_j r_j - \frac{1}{36}\sum_{t=1}^{36} y_t$$

**çº¦æŸæ¡ä»¶**ï¼š
$$
\begin{aligned}
    -y_t &\leq \sum_{j=1}^9 x_j(R_j(t) - r_j) \leq y_t, \quad t=1,...,36 \\
    \sum_{j=1}^9 x_j &= 1 \\
    x_j &\geq 0, \quad j=1,...,9 \\
    y_t &\geq 0, \quad t=1,...,36
\end{aligned}
$$

**å˜é‡è¯´æ˜**ï¼š
- $x_j$ï¼šèµ„äº§jçš„é…ç½®æ¯”ä¾‹ï¼ˆå†³ç­–å˜é‡ï¼‰
- $r_j$ï¼šèµ„äº§jçš„æœŸæœ›æ”¶ç›Š
- $y_t$ï¼šç¬¬tæœŸçš„ç»å¯¹åå·®ï¼ˆè¾…åŠ©å˜é‡ï¼‰
- $\mu$ï¼šé£é™©åŒæ¶å‚æ•°

**é£é™©åº¦é‡**ï¼šMAD (Mean Absolute Deviation)
$$\text{Risk} = \frac{1}{T}\sum_{t=1}^T |R_p(t) - \mathbb{E}[R_p]|$$

---




