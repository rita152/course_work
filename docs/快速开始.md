# 快速开始指南

## 一键运行

```bash
cd /home/zhangpeng/cource_work/portfolio_selection
./run.sh
```

或者：

```bash
cd /home/zhangpeng/cource_work/portfolio_selection
conda activate cource_work
cd src
python main.py
```

## 运行时间

约 3-5 秒

## 输出内容

### 控制台输出

程序会在控制台输出：
1. 数据加载信息（9个资产，24个月）
2. 期望收益率统计
3. MAD模型优化进度（30个μ值）
4. 方差模型优化进度（30个μ值）
5. 深入分析结果
6. 可视化生成进度

### 结果文件（results/目录）

**图表文件（6个PNG）**:
- `efficient_frontier.png` - 有效前沿图（核心图表）
- `portfolio_composition.png` - 不同μ值下的资产配置
- `mu_sensitivity.png` - μ参数影响分析（4个子图）
- `portfolio_pie_mu_6.5.png` - 中等风险组合饼图
- `correlation_heatmap.png` - 资产相关系数热力图
- `model_comparison.png` - MAD vs 方差模型对比

**数据文件（2个CSV）**:
- `mad_results_summary.csv` - MAD模型30个优化结果
- `variance_results_summary.csv` - 方差模型30个优化结果

## 查看结果

### 1. 查看图表

```bash
cd results
# Linux下使用图片查看器
eog efficient_frontier.png

# 或者用Python matplotlib查看
python3 -c "import matplotlib.pyplot as plt; import matplotlib.image as mpimg; img = mpimg.imread('efficient_frontier.png'); plt.imshow(img); plt.axis('off'); plt.show()"
```

### 2. 查看数据

```bash
cd results
# 查看CSV文件
head -20 mad_results_summary.csv
# 或用Excel、LibreOffice等打开
```

## 关键结果解读

### 有效前沿图（efficient_frontier.png）

- **横轴**: MAD风险
- **纵轴**: 期望收益
- **蓝色曲线**: MAD模型有效前沿（最优解集合）
- **红色曲线**: 方差模型有效前沿（对比用）
- **绿色星星**: 单资产投资点（均为次优解）

**如何使用**:
1. 确定自己可接受的风险水平（横轴）
2. 在有效前沿上找到对应的最优收益（纵轴）
3. 查看该点对应的投资组合配置

### 投资组合配置图（portfolio_composition.png）

- **横轴**: 不同的μ值（从小到大 = 从保守到激进）
- **纵轴**: 资产投资比例（0-100%）
- **不同颜色**: 代表不同的资产

**观察要点**:
- μ小时：债券SHY占主导（保守）
- μ中等：多元化配置（平衡）
- μ大时：能源XLE占主导（激进）

### μ参数敏感性图（mu_sensitivity.png）

4个子图展示μ的影响：
1. **左上**: μ vs 期望收益 → μ越大，收益越高
2. **右上**: μ vs MAD风险 → μ越大，风险越高
3. **左下**: μ vs 目标函数值 → 优化效果
4. **右下**: μ vs 收益/风险比 → 性价比分析

## 典型投资策略

### 保守型（μ = 1-5）

```
配置示例：
  SHY (债券): 50-80%
  XLP (日用消费品): 10-20%
  其他: 10-30%

预期月收益: 0.4-0.5%
预期风险: 0.002-0.003
```

### 平衡型（μ = 10-30）

```
配置示例：
  多元化配置7-9个资产
  每个资产5-20%
  
预期月收益: 1.0-1.5%
预期风险: 0.010-0.020
```

### 激进型（μ = 50-100）

```
配置示例：
  XLE (能源): 40-50%
  XLB (材料): 20-30%
  其他: 20-40%

预期月收益: 1.8-2.3%
预期风险: 0.035-0.046
```

## 常见问题

### Q1: 如何修改数据？

编辑 `data/returns_data.csv` 文件，保持格式不变。

### Q2: 如何修改μ值范围？

编辑 `src/main.py` 第39行：
```python
mu_values = np.logspace(-1, 2.5, 30)  # 修改这里
```

### Q3: 如何只查看MAD模型，不运行方差模型？

注释掉 `src/main.py` 中第52-62行的方差模型部分。

### Q4: 图表中文显示问题？

这是字体问题，不影响功能。如需解决：
```bash
# 安装中文字体
sudo apt-get install fonts-wqy-zenhei
# 或编辑 src/visualization.py 第15行，删除 'SimHei'
```

## 详细文档

完整的理论推导、模型说明、结果分析请查看：
- **README.md** - 完整说明文档（必读）
- **项目完成总结.md** - 项目总结

## 代码测试

### 测试单个模块

```bash
cd src

# 测试数据处理模块
python data_processor.py

# 测试MAD优化模块
python mad_optimizer.py

# 测试方差优化模块
python variance_optimizer.py
```

## 技术支持

如遇问题，检查：
1. conda环境是否正确激活
2. 依赖包是否全部安装
3. 数据文件是否存在
4. Python版本是否 >= 3.7

---

**祝使用愉快！**

